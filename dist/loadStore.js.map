{"version":3,"sources":["../src/loadStore.js"],"names":["loadStore","sessionParam","session","sagaMiddleware","store","reducer","conversationData","action","send","type","name","value","next","subscribe","getState","save","run","rootSaga"],"mappings":";;;;;AAKwBA,S,CALxB,8BACA,uC,qDACA,4C,6CACA,gD,2IAEe,SAASA,SAAT,CAAmBC,YAAnB,EAAiC;AAC9C,MAAMC,UAAUD,YAAhB;AACA,MAAME,iBAAiB,0BAAvB;AACA,MAAMC,QAAQ;AACZ;AACAC,iBAFY;;AAIZ;AACAH,UAAQI,gBALI;;AAOZ;AACEH,gBADF;AAEE,sBAAM,wBAAQ,UAACI,MAAD,EAAY;AACxB;AACAL,gBAAQM,IAAR,CAAa;AACXC,gBAAM,OADK;AAEXC,gBAAM,QAFK;AAGXC,iBAAOJ,MAHI,EAAb;;;AAMA,eAAOK,KAAKL,MAAL,CAAP;AACD,OATK,EAAN,EAFF,CAPY,CAAd;;;;AAsBAH,QAAMS,SAAN,CAAgB,YAAM;AACpB;AACAX,YAAQI,gBAAR,GAA2BF,MAAMU,QAAN,EAA3B;AACAZ,YAAQa,IAAR;;AAEA;AACAb,YAAQM,IAAR,CAAa;AACXC,YAAM,OADK;AAEXC,YAAM,OAFK;AAGXC,aAAOP,MAAMU,QAAN,EAHI,EAAb;;AAKD,GAXD;;AAaAX,iBAAea,GAAf,CAAmBC,eAAnB,EAA6Bf,OAA7B;;AAEA,SAAOE,KAAP;AACD","file":"loadStore.js","sourcesContent":["import { applyMiddleware, createStore } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './redux/sagas/index';\nimport reducer from './redux/reducers/index';\n\nexport default function loadStore(sessionParam) {\n  const session = sessionParam;\n  const sagaMiddleware = createSagaMiddleware();\n  const store = createStore(\n    // Combine all reducers\n    reducer,\n\n    // Restore the store from conversationData\n    session.conversationData,\n\n    applyMiddleware(\n      sagaMiddleware,\n      () => next => (action) => {\n        // Send action to web page for debugging\n        session.send({\n          type: 'event',\n          name: 'action',\n          value: action,\n        });\n\n        return next(action);\n      },\n    ),\n  );\n\n  store.subscribe(() => {\n    // Save the store to conversationData\n    session.conversationData = store.getState();\n    session.save();\n\n    // Send store state to web page for debugging\n    session.send({\n      type: 'event',\n      name: 'store',\n      value: store.getState(),\n    });\n  });\n\n  sagaMiddleware.run(rootSaga, session);\n\n  return store;\n}\n"]}